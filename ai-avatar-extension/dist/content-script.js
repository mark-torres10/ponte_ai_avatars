(()=>{"use strict";const e={isActive:!1,pageInfo:null,avatarVisible:!1};function t(){if(e.isActive)return;const t=function(){const e=window.location.href;if(!/espn\.com\/nba\/boxscore\/_\/(gameId\/\d+)/.test(e))return null;const t=e.match(/gameId\/(\d+)/),n=t?t[1]:void 0,o=[];return document.querySelectorAll('h1, h2, h3, .team-name, [class*="team"]').forEach(e=>{const t=e.textContent?.trim();t&&t.length>0&&t.length<50&&(o.includes(t)||o.push(t))}),{isBoxscore:!0,gameId:n,teamNames:o.length>0?o:void 0,url:e}}();if(!t)return;e.pageInfo=t,e.isActive=!0,console.log("AI Avatar: ESPN NBA boxscore page detected:",t);const n=function(){const e=document.createElement("div");return e.id="ai-avatar-placeholder",e.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    width: 80px;\n    height: 80px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border-radius: 50%;\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    font-family: Arial, sans-serif;\n    font-size: 12px;\n    text-align: center;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n    cursor: pointer;\n    transition: transform 0.2s ease;\n  ",e.innerHTML="AI<br>Avatar",e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.1)"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"}),e.addEventListener("click",()=>{console.log("Avatar clicked - future functionality will be added")}),e}();document.body.appendChild(n),e.avatarVisible=!0,chrome.runtime.sendMessage({type:"AVATAR_ACTIVATE",payload:t})}chrome.runtime.onMessage.addListener((n,o,a)=>{console.log("Content script received message:",n),"PAGE_DETECTED"===n.type?e.isActive||t():console.log("Unknown message type:",n.type),a({success:!0})}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t();let n=window.location.href;new MutationObserver(()=>{if(window.location.href!==n){n=window.location.href,e.isActive=!1,e.avatarVisible=!1;const o=document.getElementById("ai-avatar-placeholder");o&&o.remove(),setTimeout(t,100)}}).observe(document.body,{childList:!0,subtree:!0})})();