(()=>{"use strict";const t={isActive:!1,pageInfo:null,avatarVisible:!1};function e(){if(t.isActive)return;const e=function(){const t=window.location.href;if(!/espn\.com\/nba\/boxscore\/_\/(gameId\/\d+)/.test(t))return null;const e=t.match(/gameId\/(\d+)/),n=e?e[1]:void 0,o=[];return document.querySelectorAll('h1, h2, h3, .team-name, [class*="team"]').forEach(t=>{const e=t.textContent?.trim();e&&e.length>0&&e.length<50&&(o.includes(e)||o.push(e))}),{isBoxscore:!0,gameId:n,teamNames:o.length>0?o:void 0,url:t}}();if(!e)return;t.pageInfo=e,t.isActive=!0,console.log("AI Avatar: ESPN NBA boxscore page detected:",e);const n=function(){const t=document.createElement("div");t.id="ai-avatar-placeholder",t.style.cssText="\n    position: fixed !important;\n    top: 20px !important;\n    right: 20px !important;\n    width: 80px !important;\n    height: 80px !important;\n    border-radius: 50% !important;\n    z-index: 2147483647 !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    box-shadow: 0 8px 24px rgba(0,0,0,0.4) !important;\n    cursor: pointer !important;\n    transition: transform 0.2s ease !important;\n    pointer-events: auto !important;\n    transform: translateZ(0) !important;\n    overflow: hidden !important;\n    border: 3px solid white !important;\n  ";const e=document.createElement("img");return e.src=chrome.runtime.getURL("parker-avatar-80x80.png"),e.style.cssText="\n    width: 100% !important;\n    height: 100% !important;\n    object-fit: cover !important;\n    border-radius: 50% !important;\n  ",t.appendChild(e),t.addEventListener("mouseenter",()=>{t.style.transform="scale(1.1)"}),t.addEventListener("mouseleave",()=>{t.style.transform="scale(1)"}),t.addEventListener("click",()=>{console.log("Avatar clicked - future functionality will be added")}),t}();document.body.appendChild(n),n.style.setProperty("position","fixed","important"),n.style.setProperty("z-index","2147483647","important"),n.style.setProperty("top","20px","important"),n.style.setProperty("right","20px","important"),n.classList.add("ai-avatar-extension"),t.avatarVisible=!0,chrome.runtime.sendMessage({type:"AVATAR_ACTIVATE",payload:e})}chrome.runtime.onMessage.addListener((n,o,r)=>{console.log("Content script received message:",n),"PAGE_DETECTED"===n.type?t.isActive||e():console.log("Unknown message type:",n.type),r({success:!0})}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e();let n=window.location.href;function o(){const e=document.getElementById("ai-avatar-placeholder");e&&t.avatarVisible&&(e.style.setProperty("position","fixed","important"),e.style.setProperty("z-index","2147483647","important"),e.style.setProperty("top","20px","important"),e.style.setProperty("right","20px","important"),e.style.setProperty("display","flex","important"))}new MutationObserver(()=>{if(window.location.href!==n){n=window.location.href,t.isActive=!1,t.avatarVisible=!1;const o=document.getElementById("ai-avatar-placeholder");o&&o.remove(),setTimeout(e,100)}}).observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("scroll",o),window.addEventListener("resize",o),window.addEventListener("load",o),setInterval(o,2e3)})();