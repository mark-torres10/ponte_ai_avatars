(()=>{"use strict";const e=/espn\.com\/nba\/boxscore\/_\/(gameId\/\d+)/;chrome.tabs.onUpdated.addListener(async(t,o,s)=>{if("complete"===o.status&&s.url){const o=await async function(t){try{const o=await chrome.tabs.get(t);if(!o.url)return null;if(new URL(o.url),e.test(o.url)){const e=o.url.match(/gameId\/(\d+)/);return{isBoxscore:!0,gameId:e?e[1]:void 0,url:o.url}}return null}catch(e){return console.error("Error checking ESPN page:",e),null}}(t);if(o)try{await chrome.tabs.sendMessage(t,{type:"PAGE_DETECTED",payload:o})}catch(e){console.log("Content script not ready yet")}}}),chrome.runtime.onInstalled.addListener(()=>{console.log("AI Avatar Sports Commentary extension installed")}),chrome.runtime.onMessage.addListener((e,t,o)=>{switch(console.log("Background script received message:",e),e.type){case"AVATAR_ACTIVATE":console.log("Avatar activation requested");break;case"AVATAR_DEACTIVATE":console.log("Avatar deactivation requested");break;default:console.log("Unknown message type:",e.type)}o({success:!0})})})();